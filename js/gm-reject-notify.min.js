(function(b,a){GMRejectNotify={};GMRejectNotify.debug_info=function(d,c,e){c.append("<h3>"+a.debug_info+":</h3><ul></ul>");$ul=c.children("ul").eq(0);if(e){$ul.append("<li>"+e+"</li>").show()}if(d){if(d.sender_mail){$ul.append("<li><em>"+a.sender+"</em>: "+d.sender_mail+"</li>")}if(d.recipient){$ul.append("<li><em>"+a.recipient+"</em>: "+d.recipient+"</li>")}if(d.reason){$ul.append("<li><em>"+a.email_content+"</em>: "+d.reason+"</li>")}if(d.subject){$ul.append("<li><em>"+a.email_subject+"</em>: "+d.subject+"</li>")}}};GMRejectNotify.output=function(e,d){b("#send_rejected_form_wrap .loading").remove();$container=b("#GMRejectNotifyMessage");if(e&&!d){var c=e["class"];if(e.message&&c){$container.addClass(c).html("<strong>"+e.message+"</strong>");if(c==="error"&&a.debug==="1"){GMRejectNotify.debug_info(e,$container,false)}}else{$container.addClass("error").html("<strong>"+a.def_mail_error+"</strong>");if(a.debug==="1"){GMRejectNotify.debug_info(e,$container,a.ajax_wrong_data)}}}if(!e||d){$container.addClass("error").html("<strong>"+a.def_mail_error+"</strong>");if(a.debug==="1"){GMRejectNotify.debug_info(false,$container,a.ajax_fails)}}$container.show()};b(document).ready(function(){b(document).on("click","#send_reject_mail_box",function(d){d.preventDefault();var f=b(this).data("post");if(!f){return false}var c=ajaxurl+"?action="+a.action+"&postid="+f;tb_show("",c)});b(document).on("submit","#send_rejected_form_form",function(f){f.preventDefault();var c=b(this);var d=c.serialize();c.parent().append('<p class="loading">'+a.please_wait+"</p>");c.remove();b.ajax({type:"POST",url:ajaxurl,data:d,dataType:"json"}).done(function(e){GMRejectNotify.output(e,false);var g="<strong>"+a.already_rejected+"</strong>";b("#send_reject_mail_box").parent().empty().html(g)}).fail(function(){GMRejectNotify.output(false,true)})})})})(jQuery,gm_reject_notify_data);